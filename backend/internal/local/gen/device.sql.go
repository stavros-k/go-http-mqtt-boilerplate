// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: device.sql

package localdb

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createDevice = `-- name: CreateDevice :one
INSERT INTO "device" (
    device_id,
    name,
    device_type,
    status,
    created_at,
    updated_at
  )
VALUES ($1, $2, $3, $4, $5, $6)
RETURNING id, device_id, name, device_type, status, last_seen, created_at, updated_at
`

type CreateDeviceParams struct {
	DeviceID   string
	Name       string
	DeviceType string
	Status     string
	CreatedAt  pgtype.Timestamp
	UpdatedAt  pgtype.Timestamp
}

// CreateDevice
//
//	INSERT INTO "device" (
//	    device_id,
//	    name,
//	    device_type,
//	    status,
//	    created_at,
//	    updated_at
//	  )
//	VALUES ($1, $2, $3, $4, $5, $6)
//	RETURNING id, device_id, name, device_type, status, last_seen, created_at, updated_at
func (q *Queries) CreateDevice(ctx context.Context, arg CreateDeviceParams) (Device, error) {
	row := q.db.QueryRow(ctx, createDevice,
		arg.DeviceID,
		arg.Name,
		arg.DeviceType,
		arg.Status,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceID,
		&i.Name,
		&i.DeviceType,
		&i.Status,
		&i.LastSeen,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteDevice = `-- name: DeleteDevice :exec
DELETE FROM "device"
WHERE device_id = $1
`

type DeleteDeviceParams struct {
	DeviceID string
}

// DeleteDevice
//
//	DELETE FROM "device"
//	WHERE device_id = $1
func (q *Queries) DeleteDevice(ctx context.Context, arg DeleteDeviceParams) error {
	_, err := q.db.Exec(ctx, deleteDevice, arg.DeviceID)
	return err
}

const getDevice = `-- name: GetDevice :one
SELECT id, device_id, name, device_type, status, last_seen, created_at, updated_at FROM "device"
WHERE device_id = $1 LIMIT 1
`

type GetDeviceParams struct {
	DeviceID string
}

// GetDevice
//
//	SELECT id, device_id, name, device_type, status, last_seen, created_at, updated_at FROM "device"
//	WHERE device_id = $1 LIMIT 1
func (q *Queries) GetDevice(ctx context.Context, arg GetDeviceParams) (Device, error) {
	row := q.db.QueryRow(ctx, getDevice, arg.DeviceID)
	var i Device
	err := row.Scan(
		&i.ID,
		&i.DeviceID,
		&i.Name,
		&i.DeviceType,
		&i.Status,
		&i.LastSeen,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listDevices = `-- name: ListDevices :many
SELECT id, device_id, name, device_type, status, last_seen, created_at, updated_at FROM "device"
ORDER BY created_at DESC
`

// ListDevices
//
//	SELECT id, device_id, name, device_type, status, last_seen, created_at, updated_at FROM "device"
//	ORDER BY created_at DESC
func (q *Queries) ListDevices(ctx context.Context) ([]Device, error) {
	rows, err := q.db.Query(ctx, listDevices)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Device{}
	for rows.Next() {
		var i Device
		if err := rows.Scan(
			&i.ID,
			&i.DeviceID,
			&i.Name,
			&i.DeviceType,
			&i.Status,
			&i.LastSeen,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateDeviceStatus = `-- name: UpdateDeviceStatus :exec
UPDATE "device"
SET status = $2, last_seen = $3, updated_at = $4
WHERE device_id = $1
`

type UpdateDeviceStatusParams struct {
	DeviceID  string
	Status    string
	LastSeen  pgtype.Timestamp
	UpdatedAt pgtype.Timestamp
}

// UpdateDeviceStatus
//
//	UPDATE "device"
//	SET status = $2, last_seen = $3, updated_at = $4
//	WHERE device_id = $1
func (q *Queries) UpdateDeviceStatus(ctx context.Context, arg UpdateDeviceStatusParams) error {
	_, err := q.db.Exec(ctx, updateDeviceStatus,
		arg.DeviceID,
		arg.Status,
		arg.LastSeen,
		arg.UpdatedAt,
	)
	return err
}
