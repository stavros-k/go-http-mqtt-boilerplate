version: "2"
sql:
  # Local Database
  - engine: postgresql
    queries:
      - backend/internal/shared/queries
      - backend/internal/local/queries
    schema:
      - backend/internal/migrations/shared/migrations
      - backend/internal/migrations/local/migrations
    strict_function_checks: true
    strict_order_by: true
    gen:
      go:
        package: localdb
        out: backend/internal/local/gen
        sql_package: pgx/v5
        omit_unused_structs: true
        emit_empty_slices: true
        emit_sql_as_comment: true
        query_parameter_limit: 0
  # Cloud Database
  - engine: postgresql
    queries:
      - backend/internal/shared/queries
      - backend/internal/cloud/queries
    schema:
      - backend/internal/migrations/shared/migrations
      - backend/internal/migrations/cloud/migrations
    strict_function_checks: true
    strict_order_by: true
    gen:
      go:
        package: clouddb
        out: backend/internal/cloud/gen
        sql_package: pgx/v5
        omit_unused_structs: true
        emit_empty_slices: true
        emit_sql_as_comment: true
        query_parameter_limit: 0
